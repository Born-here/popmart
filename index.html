<!DOCTYPE html>
<html lang="ko">
  <head>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/moonspam/NanumSquareNeo/nanumsquareneo.css"
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>POPMART</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <link rel="stylesheet" href="css/output/styles.css" />
    <script src="/js/common/header.js"></script>
  </head>
  <body>
    <!-- 네비게이션 바 : 숨겨놓을게요. http://127.0.0.1:60068/#뒤에 page이름 적어서 이동 할 수 있어요. -->
    <!-- <nav>
      <ul>
        <li><a href="#home">메인홈</a></li>
        <li><a href="#login">로그인</a></li>
        <li><a href="#register">회원가입</a></li>
        <li><a href="#productList">상품 목록</a></li>
        <li><a href="#productDetail">상품 상세</a></li>
        <li><a href="#cart">장바구니</a></li>
        <li><a href="#event">이벤트공지</a></li>
        <li><a href="#shop">매장안내</a></li>
        <li><a href="#cs">고객센터</a></li>
        <li><a href="#popStory">팝스토리</a></li>
      </ul>
    </nav> -->
    <!-- 마이페이지 -->
    <div id="myPageDrawer"></div>
    <div id="searchDrawer"></div>
    <!-- 동적 컨텐츠 로드 영역 -->
    <main id="content"></main>

    <script>
      // ✅ 슬래시 기반 라우팅 설정
      function loadPage() {
        const path = window.location.pathname.replace("/", ""); // ✅ `route` 대신 `path` 사용
        const routes = {
          "": "page/mainPage/home.html",
          home: "page/mainPage/home.html",
          login: "page/myPage/login.html",
          register: "page/myPage/register.html",
          productList: "page/productPage/productList.html",
          productDetail: "page/productPage/productDetail.html",
          cart: "page/cart.html",
          event: "page/event.html",
          shop: "page/shop.html",
          cs: "page/cs.html",
          popStory: "page/popStory.html",
          popStoryList: "page/popStoryList.html",
          test: "page/test.html",
        };

        const pagePath = routes[path] || "page/mainPage/home.html"; // ✅ `route` → `path`로 수정
        fetch(pagePath)
          .then((response) => response.text())
          .then((data) => (document.getElementById("content").innerHTML = data))
          .catch((error) => console.error("Error loading page:", error));
      }

      window.addEventListener("popstate", loadPage); // ✅ 뒤로 가기 시 슬래시 기반으로 페이지 로드
      window.addEventListener("load", loadPage);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script type="module" src="js/scriptLoader.js"></script>
  </body>
</html>
