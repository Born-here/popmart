<!DOCTYPE html>
<html lang="ko">
  <head>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/moonspam/NanumSquareNeo/nanumsquareneo.css" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>POPMART</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <link rel="stylesheet" href="css/output/styles.css" />
    <script src="/js/common/header.js"></script>
  </head>
  <body>
    <!-- 마이페이지 -->
    <div id="myPageDrawer"></div>
    <div id="searchDrawer"></div>
    <!-- 동적 컨텐츠 로드 영역 -->
    <main id="content"></main>

    <script>
      // ✅ 슬래시 기반 라우팅 설정
      function loadPage() {
        const path = window.location.pathname.replace('/', '') // ✅ `route` 대신 `path` 사용
        const routes = {
          '': 'page/mainPage/home.html',
          home: 'page/mainPage/home.html',
          login: 'page/myPage/login.html',
          register: 'page/myPage/register.html',
          productList: 'page/productPage/productList.html',
          productDetail: 'page/productPage/productDetail.html',
          cart: 'page/cart.html',
          event: 'page/event.html',
          shop: 'page/shop.html',
          cs: 'page/cs.html',
          popStory: 'page/popStory.html',
          popStoryList: 'page/popStoryList.html',
          test: 'page/test.html',
        }

        const pagePath = routes[path] || 'page/mainPage/home.html' // ✅ `route` → `path`로 수정
        fetch(pagePath)
          .then((response) => response.text())
          .then((data) => (document.getElementById('content').innerHTML = data))
          .catch((error) => console.error('Error loading page:', error))
      }

      window.addEventListener('popstate', loadPage) // ✅ 뒤로 가기 시 슬래시 기반으로 페이지 로드
      window.addEventListener('load', loadPage)
    </script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script type="module" src="js/scriptLoader.js"></script>
  </body>
</html>
